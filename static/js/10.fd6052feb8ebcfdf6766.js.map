{"version":3,"sources":["webpack:///src/components/Rest/Banner.vue","webpack:///./src/components/Rest/Banner.vue?86e6","webpack:///./src/components/Rest/Banner.vue"],"names":["Banner","data","_this","this","defaultList","imgName","visible","uploadList","state","modal2","imgSrc","banner_id","positLi","formValidate","city","img","poist","ruleValidate","required","message","trigger","validator","rule","value","callback","length","Error","modal1","pag","loading2","loading1","total","columns1","title","align","key","width","render","h","params","attrs","src","row","banner_url","style","cursor","on","click","city_id","areaName","props","type","size","marginRight","v","shoale","String","name","url","setTimeout","$refs","upload","fileList","confirm","transfer","on-ok","Axios","post","Qs","stringify","then","res","req","error","positList","$Message","errMsg","data1","methods","handleView","handleRemove","file","splice","handleSuccess","handleFormatError","$Notice","warning","desc","handleMaxSize","handleBeforeUpload","check","resetFields","handleSubmit","_this2","validate","valid","response","areaId","concat","num","info","nodes","page","i","quanx","cancel","mounted","Rest_Banner","_vm","_h","$createElement","_c","_self","padding","margin","_v","minHeight","background","staticStyle","margin-bottom","$event","loading","columns","height","border","float","text-align","margin-top","page-size","on-change","styles","textAlign","model","$$v","expression","max-width","alt","on-cancel","ref","rules","label-width","label","prop","placeholder","$set","_l","item","index","_s","staticClass","status","nativeOn","percent","percentage","hide-info","_e","display","show-upload-list","default-file-list","on-success","format","max-size","on-format-error","on-exceeded-size","before-upload","multiple","action","location","line-height","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/10.fd6052feb8ebcfdf6766.js","sourcesContent":["<template>\n  <Layout :style=\"{padding: '0 24px 24px'}\">\n    <Breadcrumb :style=\"{margin: '24px 0'}\">\n      <BreadcrumbItem>轮播图管理</BreadcrumbItem>\n    </Breadcrumb>\n\n    <Content :style=\"{padding: '24px', minHeight: '280px', background: '#fff'}\">\n\n      <Button @click=\"shoale()\" type=\"primary\" style=\"margin-bottom: 15px\">\n        <Icon type=\"md-add\"></Icon>\n        添加banner\n      </Button>\n      <Table :loading=\"loading2\" :columns=\"columns1\" :data=\"data1\" height=\"568\" border></Table>\n    </Content>\n    <div style=\"float: left;width: 100%;text-align: center;margin-top: 25px;\">\n      <Page :total=\"total\" :page-size=\"11\" @on-change=\"page\"/>\n    </div>\n\n    <Modal\n      v-model=\"modal2\"\n      title=\"轮播图图片\"\n      :styles=\"{textAlign:'center'}\">\n      <img style=\"max-width: 100%;\" :src=\"imgSrc\" alt=\"\">\n    </Modal>\n    <Modal\n      v-model=\"modal1\"\n      title=\"请认真填写banner\"\n      :loading=\"loading1\"\n      @on-ok=\"handleSubmit('formValidate')\"\n      @on-cancel=\"cancel\"\n      :styles=\"{width: '420px'}\">\n\n      <Form ref=\"formValidate\" :model=\"formValidate\" :rules=\"ruleValidate\" :label-width=\"80\">\n        <FormItem label=\"选择地区\" prop=\"city\">\n          <Select v-model=\"formValidate.city\" placeholder=\"Select your position\">\n            <Option v-for=\"(item,index) in positLi\" :key=\"index\" :value=\"String(item.areaId)\">{{item.areaName}}\n            </Option>\n          </Select>\n        </FormItem>\n        <FormItem label=\"图片上传\" prop=\"img\">\n          <div class=\"demo-upload-list\" v-for=\"item in uploadList\">\n            <template v-if=\"item.status === 'finished'\">\n              <img :src=\"item.url\">\n              <div class=\"demo-upload-list-cover\">\n                <Icon type=\"ios-eye-outline\" @click.native=\"handleView(item.url)\">{{item.name}}</Icon>\n                <Icon type=\"ios-trash-outline\" @click.native=\"handleRemove(item)\"></Icon>\n              </div>\n            </template>\n            <template v-else>\n              <Progress v-if=\"item.showProgress\" :percent=\"item.percentage\" hide-info></Progress>\n            </template>\n          </div>\n          <Upload\n            ref=\"upload\"\n            :show-upload-list=\"false\"\n            :default-file-list=\"defaultList\"\n            :on-success=\"handleSuccess\"\n            :format=\"['jpg','jpeg','png']\"\n            :max-size=\"2048\"\n            :on-format-error=\"handleFormatError\"\n            :on-exceeded-size=\"handleMaxSize\"\n            :before-upload=\"handleBeforeUpload\"\n            multiple\n            type=\"drag\"\n\n            action=\"https://app.gsfzd.com/publics/picture/imgouter\"\n            :data=\"{location:'slideshow'}\"\n\n            style=\"display: inline-block;width:58px;\">\n            <div style=\"width: 58px;height:58px;line-height: 58px;\">\n              <Icon type=\"ios-camera\" size=\"20\"></Icon>\n            </div>\n          </Upload>\n        </FormItem>\n\n      </Form>\n    </Modal>\n\n\n    <Modal title=\"View Image\" v-model=\"visible\"\n           :styles=\"{textAlign:'center'}\">\n      <img :src=\"imgName\" v-if=\"visible\" style=\"max-width: 100%\">\n    </Modal>\n  </Layout>\n</template>\n\n<script type=\"text/ecmascript-6\">\n  export default {\n\n    data() {\n\n      const validatePassCheck = (rule, value, callback) => {\n        if (this.uploadList.length !== 1) {\n          callback(new Error('请选择1张图片'));\n        } else {\n          callback();\n        }\n      };\n      return {\n        defaultList: [],\n        imgName: '',\n        visible: false,\n        uploadList: [],\n        state: 0,\n        modal2: false,\n        imgSrc: '',\n        banner_id: '',\n\n        positLi: [],\n        formValidate: {\n          city: '',\n          img: ''\n        },\n        poist: [],\n        ruleValidate: {\n          city: [\n            {required: true, message: '请选择地区!', trigger: 'change'}\n          ],\n          img: [\n            {required: true, validator: validatePassCheck, trigger: 'change'}\n          ]\n        },\n        modal1: false,\n        pag: 1,\n        loading2: true,\n        loading1: true,\n        total: 0,\n        columns1: [\n          {\n            title: 'ID',\n            align: 'center',\n            key: 'banner_id',\n            width: 50\n          },\n          {\n            title: '图片',\n            align: 'center',\n            key: 'banner_url',\n            render: (h, params) => {\n              return h('div', [\n                h('img', {\n                  attrs: {\n                    src: 'http://img.gsfzd.com/' + params.row.banner_url,\n                  },\n                  style: {\n                    width: '30px',\n                    cursor: 'pointer'\n                  },\n                  on: {\n                    click: () => {\n                      this.modal2 = true;\n                      this.imgSrc = 'http://img.gsfzd.com/' + params.row.banner_url\n                    }\n                  }\n                })\n              ])\n            }\n          },\n          {\n            title: '显示地区',\n            align: 'center',\n            render: (h, params) => {\n              if (params.row.city_id === 0) {\n                return ('div', [\n                  h('p', '全部显示')\n                ])\n              } else {\n                return ('div', [\n                  h('p', params.row.areaName)\n                ])\n              }\n            }\n          },\n          {\n            title: '操作',\n            align: 'center',\n            render: (h, params) => {\n              return h('div', [\n                h('Button', {\n                  props: {\n                    type: 'primary',\n                    size: 'small'\n                  },\n                  style: {\n                    marginRight: '5px'\n                  },\n                  on: {\n                    click: () => {\n                      let v = this;\n                      v.shoale();\n                      v.state = 1;\n                      v.banner_id = params.row.banner_id;\n                      v.formValidate.city = String(params.row.city_id);\n                      v.defaultList = [\n                        {\n                          'name': 'bc7521e033abdd1e92222d733590f104',\n                          'url': 'http://img.gsfzd.com/' + params.row.banner_url\n                        }];\n\n                      setTimeout(function () {\n                        v.uploadList = v.$refs.upload.fileList;\n                      }, 0)\n\n                    }\n                  }\n                }, '修改'),\n                h('Poptip', {\n                  props: {\n                    confirm: true,\n                    transfer: true,\n                    title: '是否继续删除该banner?',\n                  },\n                  on: {\n                    'on-ok': () => {\n                      let v = this;\n                      v.Axios.post('https://app.gsfzd.com/index.php/admin/banner/del', v.Qs.stringify({\n                        banner_id: params.row.banner_id\n                      })).then((res, req) => {\n                        if (res.data.error === 0) {\n                          v.positList();\n                        } else {\n                          v.$Message.error(res.data.errMsg)\n                        }\n                      })\n                    }\n                  }\n                }, [\n                  h('Button', {\n                    props: {\n                      type: 'error',\n                      size: 'small'\n                    }\n                  }, '删除')\n                ])\n\n              ]);\n            }\n          }\n        ],\n        data1: []\n      }\n    },\n    methods: {\n      handleView(name) {\n        this.imgName = name;\n        this.visible = true;\n      },\n      handleRemove(file) {\n        const fileList = this.$refs.upload.fileList;\n        this.$refs.upload.fileList.splice(0, 1);\n      },\n      handleSuccess(res, file) {\n        file.url = 'http://img.gsfzd.com/' + res;\n        file.name = '7eb99afb9d5f317c912f08b5212fd69a';\n      },\n      handleFormatError(file) {\n        this.$Notice.warning({\n          title: 'The file format is incorrect',\n          desc: 'File format of ' + file.name + ' is incorrect, please select jpg or png.'\n        });\n      },\n      handleMaxSize(file) {\n        this.$Notice.warning({\n          title: 'Exceeding file size limit',\n          desc: 'File  ' + file.name + ' is too large, no more than 2M.'\n        });\n      },\n      handleBeforeUpload() {\n        const check = this.uploadList.length < 1;\n        if (!check) {\n          this.$Notice.warning({\n            title: 'Up to five pictures can be uploaded.'\n          });\n        }\n        return check;\n      },\n\n      //显示添加修改管理员弹窗\n      shoale() {\n        this.$refs['formValidate'].resetFields();\n        this.state = 0;\n        this.modal1 = true;\n        this.loading1 = true;\n        this.city();\n      },\n\n      //添加管理员账号列表\n      handleSubmit(name) {\n        this.$refs[name].validate((valid) => {\n          if (valid) {\n            let v = this;\n            v.Axios.post('https://app.gsfzd.com/index.php/admin/banner/add', v.Qs.stringify({\n              banner_id: v.state === 0 ? '' : v.banner_id,\n              banner_url: v.uploadList[0].response,\n              city_id: v.formValidate.city\n            })).then((res, req) => {\n              if (res.data.error === 0) {\n                v.modal1 = false;\n                v.positList();\n                v.$refs['formValidate'].resetFields();\n                v.$refs.upload.fileList.splice(0, 1);\n              } else {\n                v.$Message.error(res.data.errMsg);\n                v.loading1 = false\n              }\n            });\n          } else {\n            this.$Message.error('添加banner失败!');\n            this.loading1 = false\n          }\n        })\n      },\n\n      //地区列表\n      city() {\n        let v = this;\n        v.Axios.post('https://app.gsfzd.com/index.php/admin/banner/city').then((res, req) => {\n          if (res.data.error === 0) {\n            let a = [{areaId: 0, areaName: '全部显示'}];\n            v.positLi = a.concat(res.data.data);\n          } else {\n            v.$Message.error(res.data.errMsg)\n          }\n        })\n      },\n\n      //banner列表\n      positList() {\n        let v = this;\n        v.loading2 = true;\n        v.Axios.post('https://app.gsfzd.com/index.php/admin/banner/index', v.Qs.stringify({\n          pag: v.pag,\n          num: 11\n        })).then((res, req) => {\n          v.loading2 = false;\n          if (res.data.error === 0) {\n            v.data1 = res.data.data.info;\n            v.total = res.data.data.nodes\n          } else {\n            v.$Message.error(res.data.errMsg)\n          }\n        })\n      },\n\n      //分页\n      page(i) {\n        this.pag = i;\n        this.positList()\n      },\n\n\n      //权限LIST\n      quanx() {\n        let v = this;\n        v.Axios.post('https://app.gsfzd.com/index.php/admin/role/index1').then((res, req) => {\n          if (res.data.error === 0) {\n            v.poist = res.data.data;\n          } else {\n            v.$Message.error(res.data.errMsg);\n          }\n        })\n      },\n\n      cancel() {\n        this.$Message.info('你点击了取消');\n\n        this.$refs.upload.fileList.splice(0, 1);\n      },\n    },\n    mounted() {\n      this.uploadList = this.$refs.upload.fileList;\n      this.quanx();\n      this.positList()\n    }\n  }\n</script>\n<style lang=\"less\">\n  .demo-upload-list {\n    position:relative;\n    display: inline-block;\n    width: 60px;\n    height: 60px;\n    text-align: center;\n    line-height: 60px;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    overflow: hidden;\n    background: #fff;\n    position: relative;\n    box-shadow: 0 1px 1px rgba(0, 0, 0, .2);\n    margin-right: 4px;\n  }\n\n  .demo-upload-list img {\n    position: absolute;\n    margin: auto;\n    top: 0;\n    left: 0;\n    bottom: 0;\n    right: 0;\n    width: 100%;\n  }\n\n  .demo-upload-list-cover {\n    display: none;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: rgba(0, 0, 0, .6);\n  }\n\n  .demo-upload-list:hover .demo-upload-list-cover {\n    display: block;\n  }\n\n  .demo-upload-list-cover i {\n    color: #fff;\n    font-size: 20px;\n    cursor: pointer;\n    margin: 0 2px;\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/Rest/Banner.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('Layout',{style:({padding: '0 24px 24px'})},[_c('Breadcrumb',{style:({margin: '24px 0'})},[_c('BreadcrumbItem',[_vm._v(\"轮播图管理\")])],1),_vm._v(\" \"),_c('Content',{style:({padding: '24px', minHeight: '280px', background: '#fff'})},[_c('Button',{staticStyle:{\"margin-bottom\":\"15px\"},attrs:{\"type\":\"primary\"},on:{\"click\":function($event){_vm.shoale()}}},[_c('Icon',{attrs:{\"type\":\"md-add\"}}),_vm._v(\"\\n      添加banner\\n    \")],1),_vm._v(\" \"),_c('Table',{attrs:{\"loading\":_vm.loading2,\"columns\":_vm.columns1,\"data\":_vm.data1,\"height\":\"568\",\"border\":\"\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"float\":\"left\",\"width\":\"100%\",\"text-align\":\"center\",\"margin-top\":\"25px\"}},[_c('Page',{attrs:{\"total\":_vm.total,\"page-size\":11},on:{\"on-change\":_vm.page}})],1),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"轮播图图片\",\"styles\":{textAlign:'center'}},model:{value:(_vm.modal2),callback:function ($$v) {_vm.modal2=$$v},expression:\"modal2\"}},[_c('img',{staticStyle:{\"max-width\":\"100%\"},attrs:{\"src\":_vm.imgSrc,\"alt\":\"\"}})]),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"请认真填写banner\",\"loading\":_vm.loading1,\"styles\":{width: '420px'}},on:{\"on-ok\":function($event){_vm.handleSubmit('formValidate')},\"on-cancel\":_vm.cancel},model:{value:(_vm.modal1),callback:function ($$v) {_vm.modal1=$$v},expression:\"modal1\"}},[_c('Form',{ref:\"formValidate\",attrs:{\"model\":_vm.formValidate,\"rules\":_vm.ruleValidate,\"label-width\":80}},[_c('FormItem',{attrs:{\"label\":\"选择地区\",\"prop\":\"city\"}},[_c('Select',{attrs:{\"placeholder\":\"Select your position\"},model:{value:(_vm.formValidate.city),callback:function ($$v) {_vm.$set(_vm.formValidate, \"city\", $$v)},expression:\"formValidate.city\"}},_vm._l((_vm.positLi),function(item,index){return _c('Option',{key:index,attrs:{\"value\":String(item.areaId)}},[_vm._v(_vm._s(item.areaName)+\"\\n          \")])}))],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label\":\"图片上传\",\"prop\":\"img\"}},[_vm._l((_vm.uploadList),function(item){return _c('div',{staticClass:\"demo-upload-list\"},[(item.status === 'finished')?[_c('img',{attrs:{\"src\":item.url}}),_vm._v(\" \"),_c('div',{staticClass:\"demo-upload-list-cover\"},[_c('Icon',{attrs:{\"type\":\"ios-eye-outline\"},nativeOn:{\"click\":function($event){_vm.handleView(item.url)}}},[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('Icon',{attrs:{\"type\":\"ios-trash-outline\"},nativeOn:{\"click\":function($event){_vm.handleRemove(item)}}})],1)]:[(item.showProgress)?_c('Progress',{attrs:{\"percent\":item.percentage,\"hide-info\":\"\"}}):_vm._e()]],2)}),_vm._v(\" \"),_c('Upload',{ref:\"upload\",staticStyle:{\"display\":\"inline-block\",\"width\":\"58px\"},attrs:{\"show-upload-list\":false,\"default-file-list\":_vm.defaultList,\"on-success\":_vm.handleSuccess,\"format\":['jpg','jpeg','png'],\"max-size\":2048,\"on-format-error\":_vm.handleFormatError,\"on-exceeded-size\":_vm.handleMaxSize,\"before-upload\":_vm.handleBeforeUpload,\"multiple\":\"\",\"type\":\"drag\",\"action\":\"https://app.gsfzd.com/publics/picture/imgouter\",\"data\":{location:'slideshow'}}},[_c('div',{staticStyle:{\"width\":\"58px\",\"height\":\"58px\",\"line-height\":\"58px\"}},[_c('Icon',{attrs:{\"type\":\"ios-camera\",\"size\":\"20\"}})],1)])],2)],1)],1),_vm._v(\" \"),_c('Modal',{attrs:{\"title\":\"View Image\",\"styles\":{textAlign:'center'}},model:{value:(_vm.visible),callback:function ($$v) {_vm.visible=$$v},expression:\"visible\"}},[(_vm.visible)?_c('img',{staticStyle:{\"max-width\":\"100%\"},attrs:{\"src\":_vm.imgName}}):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b4130822\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/Rest/Banner.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b4130822\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!less-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./Banner.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Banner.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./Banner.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b4130822\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./Banner.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/Rest/Banner.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}