webpackJsonp([30],{ZqGt:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){var a=this;return{state:0,admin_id:"",disabled:!1,positLi:[],formValidate:{name:"",passwd:"",passwdCheck:"",city:""},poist:[],ruleValidate:{name:[{required:!0,message:"请输入管理员账号!",trigger:"blur"}],passwd:[{required:!0,validator:function(t,e,i){""===e?i(new Error("请输入密码！")):(""!==a.formValidate.passwdCheck&&a.$refs.formValidate.validateField("passwdCheck"),i())},trigger:"blur"}],passwdCheck:[{required:!0,validator:function(t,e,i){""===e?i(new Error("请确认密码!")):e!==a.formValidate.passwd?i(new Error("两次密码输入不一致!")):i()},trigger:"blur"}],city:[{required:!0,message:"请选择管理员职位!",trigger:"change"}]},modal1:!1,pag:1,loading2:!0,loading1:!0,total:0,columns1:[{title:"ID",key:"admin_id"},{title:"用户名",key:"admin_name"},{title:"职位名称",key:"role_name"},{title:"操作",align:"center",render:function(t,e){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){var t=a;t.state=1,t.modal1=!0,t.loading1=!0,t.disabled=!0,t.admin_id=e.row.admin_id,t.position(),t.formValidate.name=e.row.admin_name,t.formValidate.city=String(e.row.role_id)}}},"修改"),t("Poptip",{props:{confirm:!0,transfer:!0,title:"是否继续删除该职位?"},on:{"on-ok":function(){var t=a;t.Axios.post("https://app.gsfzd.com/index.php/admin/admin/del",t.Qs.stringify({admin_id:e.row.admin_id})).then(function(a,e){0===a.data.error?t.positList():t.$Message.error(a.data.errMsg)})}}},[t("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data1:[]}},methods:{shoale:function(){this.$refs.formValidate.resetFields(),this.state=0,this.modal1=!0,this.loading1=!0,this.disabled=!1,this.position()},position:function(){var a=this;a.Axios.post("https://app.gsfzd.com/index.php/admin/role/index",a.Qs.stringify({pag:1,num:-1})).then(function(t,e){0===t.data.error?a.positLi=t.data.data.info:a.$Message.success(t.data.errMsg)})},handleSubmit:function(a){var t=this;this.$refs[a].validate(function(a){if(a){var e=t,i={};i=0===e.state?{admin_id:"",admin_name:e.formValidate.name,admin_pwd:e.formValidate.passwd,role_id:e.formValidate.city}:{admin_id:e.admin_id,role_id:e.formValidate.city},e.Axios.post("https://app.gsfzd.com/index.php/admin/admin/add",e.Qs.stringify(i)).then(function(a,t){0===a.data.error?(e.modal1=!1,e.positList(),e.$refs.formValidate.resetFields()):(e.$Message.error(a.data.errMsg),e.loading1=!1)})}else t.$Message.error("添加管理员账号失败!"),t.loading1=!1})},positList:function(){var a=this;a.loading2=!0,a.Axios.post("https://app.gsfzd.com/admin/admin/index",a.Qs.stringify({pag:a.pag,num:11})).then(function(t,e){a.loading2=!1,0===t.data.error?(a.data1=t.data.data.info,a.total=t.data.data.nodes):a.$Message.error(t.data.errMsg)})},page:function(a){this.pag=a,this.positList()},quanx:function(){var a=this;a.Axios.post("https://app.gsfzd.com/index.php/admin/role/index1").then(function(t,e){0===t.data.error?a.poist=t.data.data:a.$Message.error(t.data.errMsg)})},cancel:function(){this.$Message.info("你点击了取消")}},mounted:function(){this.quanx(),this.positList()}},r={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("Layout",{style:{padding:"0 24px 24px"}},[e("Breadcrumb",{style:{margin:"24px 0"}},[e("BreadcrumbItem",[a._v("管理员列表")])],1),a._v(" "),e("Content",{style:{padding:"24px",minHeight:"280px",background:"#fff"}},[e("Button",{staticStyle:{"margin-bottom":"15px"},attrs:{type:"primary"},on:{click:function(t){a.shoale()}}},[e("Icon",{attrs:{type:"md-add"}}),a._v("\n      添加管理员\n    ")],1),a._v(" "),e("Table",{attrs:{loading:a.loading2,columns:a.columns1,data:a.data1,height:"568",border:""}})],1),a._v(" "),e("div",{staticStyle:{float:"left",width:"100%","text-align":"center","margin-top":"25px"}},[e("Page",{attrs:{total:a.total,"page-size":11},on:{"on-change":a.page}})],1),a._v(" "),e("Modal",{attrs:{title:"请认真填写添加管理员信息",loading:a.loading1,styles:{width:"420px"}},on:{"on-ok":function(t){a.handleSubmit("formValidate")},"on-cancel":a.cancel},model:{value:a.modal1,callback:function(t){a.modal1=t},expression:"modal1"}},[e("Form",{ref:"formValidate",attrs:{model:a.formValidate,rules:a.ruleValidate,"label-width":80}},[e("FormItem",{attrs:{label:"管理账号",prop:"name"}},[e("Input",{attrs:{disabled:a.disabled,maxlength:18,placeholder:"Enter your username"},model:{value:a.formValidate.name,callback:function(t){a.$set(a.formValidate,"name",t)},expression:"formValidate.name"}})],1),a._v(" "),1!==a.state?[e("FormItem",{attrs:{label:"账号密码",prop:"passwd"}},[e("Input",{attrs:{type:"password",placeholder:"Enter your password"},model:{value:a.formValidate.passwd,callback:function(t){a.$set(a.formValidate,"passwd",t)},expression:"formValidate.passwd"}})],1),a._v(" "),e("FormItem",{attrs:{label:"确认密码",prop:"passwdCheck"}},[e("Input",{attrs:{type:"password",placeholder:"Enter your password"},model:{value:a.formValidate.passwdCheck,callback:function(t){a.$set(a.formValidate,"passwdCheck",t)},expression:"formValidate.passwdCheck"}})],1)]:a._e(),a._v(" "),e("FormItem",{attrs:{label:"选择职位",prop:"city"}},[e("Select",{attrs:{placeholder:"Select your position"},model:{value:a.formValidate.city,callback:function(t){a.$set(a.formValidate,"city",t)},expression:"formValidate.city"}},a._l(a.positLi,function(t,i){return e("Option",{key:i,attrs:{value:String(t.role_id)}},[a._v(a._s(t.role_name)+"\n          ")])}))],1)],2)],1)],1)},staticRenderFns:[]};var o=e("VU/8")(i,r,!1,function(a){e("fM5P")},null,null);t.default=o.exports},fM5P:function(a,t){}});
//# sourceMappingURL=30.fc23e70f3063c1de7440.js.map