webpackJsonp([32],{hXOB:function(e,t){},zCgX:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){var e=this;return{modal1:!1,loading1:!0,sta:2,formValidate:{name:"",city:"",cityList:[],kzq:"",fangf:""},ruleValidate:{name:[{required:!0,message:"请输入控制器名称",trigger:"blur"}],city:[{required:!0,message:"请输入选择商品分类",trigger:"change"}],fangf:[{required:!0,message:"请输入方法名称",trigger:"blur"}],kzq:[{required:!0,message:"请输入控制器名称",trigger:"blur"}]},total:1,pag:1,loading:!0,columns1:[{title:"ID",key:"node_id"},{title:"parent ID",key:"node_pid"},{title:"权限名称",key:"node_name"},{title:"控制器名称",key:"node_controller"},{title:"方法名称",key:"node_action"},{title:"操作",align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showAlert(a.row)}}},"修改"),t("Poptip",{props:{confirm:!0,transfer:!0,title:"是否继续删除该权限?"},on:{"on-ok":function(){var t=e;t.Axios.post("https://app.gsfzd.com/index.php/admin/node/del",t.Qs.stringify({node_id:a.row.node_id})).then(function(e,a){0===e.data.error?(t.list(),t.$Message.success("删除权限成功!")):t.$Message.success(e.data.errMsg)})}}},[t("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data1:[]}},methods:{list:function(){var e=this;e.loading=!0,e.Axios.post("https://app.gsfzd.com/index.php/admin/node/index",e.Qs.stringify({pag:e.pag,num:"11"})).then(function(t,a){0===t.data.error?(e.total=t.data.data.nodes,e.data1=t.data.data.info):e.$Message.error(t.data.errMsg),e.loading=!1})},showAlert:function(e){var t=this;t.sta=e?1:2,t.loading1=!0,t.modal1=!0,t.Axios.post("https://app.gsfzd.com/index.php/admin/node/index1").then(function(a,n){0===a.data.error?1===t.sta?t.formValidate={id:e.node_id,name:e.node_name,kzq:e.node_controller,city:String(e.node_pid),cityList:a.data.data,fangf:e.node_action}:t.formValidate.cityList=a.data.data:t.$Message.error(a.data.errMsg)})},handleSubmit:function(e){var t=this;t.$refs[e].validate(function(e){e?1===t.sta?t.Axios.post("https://app.gsfzd.com/index.php/admin/node/update",t.Qs.stringify({node_id:t.formValidate.id,node_name:t.formValidate.name,node_controller:t.formValidate.kzq,node_action:t.formValidate.fangf,node_pid:t.formValidate.city})).then(function(e,a){0===e.data.error?(t.list(),t.$refs.formValidate.resetFields(),t.modal1=!1,t.$Message.success("修改成功!")):(t.$Message.error(e.data.errMsg),t.loading1=!1)}):t.Axios.post("https://app.gsfzd.com/index.php/admin/node/add",t.Qs.stringify({node_name:t.formValidate.name,node_controller:t.formValidate.kzq,node_action:t.formValidate.fangf,node_pid:t.formValidate.city})).then(function(e,a){0===e.data.error?(t.list(),t.$refs.formValidate.resetFields(),t.modal1=!1,t.$Message.success("添加成功!")):(t.$Message.error(e.data.errMsg),t.loading1=!1)}):(t.loading1=!1,t.$Message.error("Fail!"))})},page:function(e){this.pag=e,this.list()},cancel:function(){this.$Message.info("你点击了取消"),this.$refs.formValidate.resetFields()}},mounted:function(){this.list()}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Layout",{style:{padding:"0 24px 24px"}},[a("Breadcrumb",{style:{margin:"24px 0"}},[a("BreadcrumbItem",[e._v("权限管理")])],1),e._v(" "),a("Content",{style:{padding:"24px",minHeight:"280px",background:"#fff"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){e.showAlert()}}},[a("Icon",{attrs:{type:"md-add"}}),e._v("\n      添加权限\n    ")],1),e._v(" "),a("Table",{staticStyle:{"margin-top":"15px"},attrs:{loading:e.loading,border:"",columns:e.columns1,data:e.data1,height:"568"}})],1),e._v(" "),a("div",{staticStyle:{float:"left",width:"100%","text-align":"center","margin-top":"25px"}},[a("Page",{attrs:{total:e.total,"page-size":11},on:{"on-change":e.page}})],1),e._v(" "),a("Modal",{attrs:{title:"请认真填写添加权限信息",loading:e.loading1,styles:{width:"400px"}},on:{"on-ok":function(t){e.handleSubmit("formValidate")},"on-cancel":e.cancel},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"权限名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入权限名称"},model:{value:e.formValidate.name,callback:function(t){e.$set(e.formValidate,"name",t)},expression:"formValidate.name"}})],1),e._v(" "),a("FormItem",{attrs:{label:"商品分类",prop:"city"}},[a("Select",{attrs:{placeholder:"请输入选择商品分类"},model:{value:e.formValidate.city,callback:function(t){e.$set(e.formValidate,"city",t)},expression:"formValidate.city"}},[a("Option",{attrs:{value:"0"}},[e._v("顶级分类")]),e._v(" "),e._l(e.formValidate.cityList,function(t,n){return a("Option",{key:n,attrs:{value:String(t.node_id)}},[e._v("\n            "+e._s(t.node_name)+"\n          ")])})],2)],1),e._v(" "),a("FormItem",{attrs:{label:"控制器名",prop:"kzq"}},[a("Input",{attrs:{placeholder:"请输入控制器名称"},model:{value:e.formValidate.kzq,callback:function(t){e.$set(e.formValidate,"kzq",t)},expression:"formValidate.kzq"}})],1),e._v(" "),a("FormItem",{attrs:{label:"方法名称",prop:"fangf"}},[a("Input",{attrs:{placeholder:"请输入方法名称"},model:{value:e.formValidate.fangf,callback:function(t){e.$set(e.formValidate,"fangf",t)},expression:"formValidate.fangf"}})],1)],1)],1)],1)},staticRenderFns:[]};var i=a("VU/8")(n,o,!1,function(e){a("hXOB")},null,null);t.default=i.exports}});
//# sourceMappingURL=32.6376a2c3c575a3c33f4e.js.map