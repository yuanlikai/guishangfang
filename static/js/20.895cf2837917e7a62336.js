webpackJsonp([20],{d9d1:function(e,a){},zCgX:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var n={data:function(){var e=this;return{modal1:!1,loading1:!0,sta:2,formValidate:{name:"",city:"",cityList:[],kzq:"",fangf:""},ruleValidate:{name:[{required:!0,message:"请输入控制器名称",trigger:"blur"}],city:[{required:!0,message:"请输入选择商品分类",trigger:"change"}],fangf:[{required:!0,message:"请输入方法名称",trigger:"blur"}],kzq:[{required:!0,message:"请输入控制器名称",trigger:"blur"}]},total:1,pag:1,loading:!0,columns1:[{title:"ID",key:"node_id"},{title:"parent ID",key:"node_pid"},{title:"权限名称",key:"node_name"},{title:"控制器名称",key:"node_controller"},{title:"方法名称",key:"node_action"},{title:"操作",align:"center",render:function(a,t){return a("div",[a("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showAlert(t.row)}}},"修改"),a("Poptip",{props:{confirm:!0,transfer:!0,title:"是否继续删除该权限?"},on:{"on-ok":function(){var a=e;a.Axios.post("/api/index.php/admin/node/del",a.Qs.stringify({node_id:t.row.node_id})).then(function(e,t){0===e.data.error?(a.list(),a.$Message.success("删除权限成功!")):a.$Message.success(e.data.errMsg)})}}},[a("Button",{props:{type:"error",size:"small"}},"删除")])])}}],data1:[]}},methods:{list:function(){var e=this;e.loading=!0,e.Axios.post("/api/index.php/admin/node/index",e.Qs.stringify({pag:e.pag,num:"11"})).then(function(a,t){0===a.data.error?(e.total=a.data.data.nodes,e.data1=a.data.data.info):e.$Message.error(a.data.errMsg),e.loading=!1})},showAlert:function(e){var a=this;a.sta=e?1:2,a.loading1=!0,a.modal1=!0,a.Axios.post("/api/index.php/admin/node/index1").then(function(t,n){0===t.data.error?1===a.sta?a.formValidate={id:e.node_id,name:e.node_name,kzq:e.node_controller,city:String(e.node_pid),cityList:t.data.data,fangf:e.node_action}:a.formValidate.cityList=t.data.data:a.$Message.error(t.data.errMsg)})},handleSubmit:function(e){var a=this;a.$refs[e].validate(function(e){e?1===a.sta?a.Axios.post("/api/index.php/admin/node/update",a.Qs.stringify({node_id:a.formValidate.id,node_name:a.formValidate.name,node_controller:a.formValidate.kzq,node_action:a.formValidate.fangf,node_pid:a.formValidate.city})).then(function(e,t){0===e.data.error?(a.list(),a.$refs.formValidate.resetFields(),a.modal1=!1,a.$Message.success("修改成功!")):(a.$Message.error(e.data.errMsg),a.loading1=!1)}):a.Axios.post("/api/index.php/admin/node/add",a.Qs.stringify({node_name:a.formValidate.name,node_controller:a.formValidate.kzq,node_action:a.formValidate.fangf,node_pid:a.formValidate.city})).then(function(e,t){0===e.data.error?(a.list(),a.$refs.formValidate.resetFields(),a.modal1=!1,a.$Message.success("添加成功!")):(a.$Message.error(e.data.errMsg),a.loading1=!1)}):(a.loading1=!1,a.$Message.error("Fail!"))})},page:function(e){this.pag=e,this.list()},cancel:function(){this.$Message.info("你点击了取消"),this.$refs.formValidate.resetFields()}},mounted:function(){this.list()}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("Layout",{style:{padding:"0 24px 24px"}},[t("Breadcrumb",{style:{margin:"24px 0"}},[t("BreadcrumbItem",[e._v("权限管理")])],1),e._v(" "),t("Content",{style:{padding:"24px",minHeight:"280px",background:"#fff"}},[t("Button",{attrs:{type:"primary"},on:{click:function(a){e.showAlert()}}},[t("Icon",{attrs:{type:"md-add"}}),e._v("\n      添加权限\n    ")],1),e._v(" "),t("Table",{staticStyle:{"margin-top":"15px"},attrs:{loading:e.loading,border:"",columns:e.columns1,data:e.data1,height:"568"}})],1),e._v(" "),t("div",{staticStyle:{float:"left",width:"100%","text-align":"center","margin-top":"25px"}},[t("Page",{attrs:{total:e.total,"page-size":11},on:{"on-change":e.page}})],1),e._v(" "),t("Modal",{attrs:{title:"请认真填写添加权限信息",loading:e.loading1,styles:{width:"400px"}},on:{"on-ok":function(a){e.handleSubmit("formValidate")},"on-cancel":e.cancel},model:{value:e.modal1,callback:function(a){e.modal1=a},expression:"modal1"}},[t("Form",{ref:"formValidate",attrs:{model:e.formValidate,rules:e.ruleValidate,"label-width":80}},[t("FormItem",{attrs:{label:"权限名称",prop:"name"}},[t("Input",{attrs:{placeholder:"请输入权限名称"},model:{value:e.formValidate.name,callback:function(a){e.$set(e.formValidate,"name",a)},expression:"formValidate.name"}})],1),e._v(" "),t("FormItem",{attrs:{label:"商品分类",prop:"city"}},[t("Select",{attrs:{placeholder:"请输入选择商品分类"},model:{value:e.formValidate.city,callback:function(a){e.$set(e.formValidate,"city",a)},expression:"formValidate.city"}},[t("Option",{attrs:{value:"0"}},[e._v("顶级分类")]),e._v(" "),e._l(e.formValidate.cityList,function(a,n){return t("Option",{key:n,attrs:{value:String(a.node_id)}},[e._v("\n            "+e._s(a.node_name)+"\n          ")])})],2)],1),e._v(" "),t("FormItem",{attrs:{label:"控制器名",prop:"kzq"}},[t("Input",{attrs:{placeholder:"请输入控制器名称"},model:{value:e.formValidate.kzq,callback:function(a){e.$set(e.formValidate,"kzq",a)},expression:"formValidate.kzq"}})],1),e._v(" "),t("FormItem",{attrs:{label:"方法名称",prop:"fangf"}},[t("Input",{attrs:{placeholder:"请输入方法名称"},model:{value:e.formValidate.fangf,callback:function(a){e.$set(e.formValidate,"fangf",a)},expression:"formValidate.fangf"}})],1)],1)],1)],1)},staticRenderFns:[]};var o=t("VU/8")(n,i,!1,function(e){t("d9d1")},null,null);a.default=o.exports}});
//# sourceMappingURL=20.895cf2837917e7a62336.js.map